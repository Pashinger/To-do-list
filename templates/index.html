{% extends 'base.html' %}

{% block content %}

<div class="d-flex flex-column flex-row p-5 gap-4 align-items-center justify-content-center col-md-12">
  <div class="list-group col-8 p-5 m-5 bg-body-tertiary border border-dark border-2">
    <div class="d-flex bg-body-secondary p-3 border border-bottom-0 rounded-top align-items-center position-relative">
        <h2 class="ps-4 w-100">{{ list_name }}</h2>
        <form method="POST">
            <button class="btn" name="action" value="save" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-title="Save your list">
              <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" fill="currentColor" class="bi bi-floppy2-fill" viewBox="0 0 16 16">
                <path d="M12 2h-2v3h2z"/>
                <path d="M1.5 0A1.5 1.5 0 0 0 0 1.5v13A1.5 1.5 0 0 0 1.5 16h13a1.5 1.5 0 0 0 1.5-1.5V2.914a1.5 1.5 0 0 0-.44-1.06L14.147.439A1.5 1.5 0 0 0 13.086 0zM4 6a1 1 0 0 1-1-1V1h10v4a1 1 0 0 1-1 1zM3 9h10a1 1 0 0 1 1 1v5H2v-5a1 1 0 0 1 1-1"/>
              </svg>
            </button>
        </form>

        <form method="POST">
          <a href="#" class="btn" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-title="Make a new list">
              <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" fill="currentColor" class="bi bi-arrow-counterclockwise" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2z"/>
                <path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466"/>
              </svg>
          </a>
        </form>

        <form method="POST">
            <input type="hidden" class="" data-bs-toggle="modal" data-bs-target="#EditOptions">
            <button class="btn" type="button" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-title="Edit options">
              <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" fill="currentColor" class="bi bi-pencil" viewBox="0 0 16 16">
                <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325"/>
              </svg>
            </button>
        </form>

    </div>
      {% for task in tasks_list %}
      <div class="list-group-item d-flex gap-3">
        <form method="POST">
          {{ checkbox_form.hidden_tag() }}
          <input type="hidden" name="checkbox_hidden" value="{{ loop.index0 }}">
          {% if task[2] %}
            {{ checkbox_form.checkbox(class="form-check-input flex-shrink-0",
                                      type="checkbox",
                                      onchange="this.form.submit();",
                                      style="font-size: 1.375em;",
                                      checked="checked"
                                      )
            }}
          {% else %}
            {{ checkbox_form.checkbox(class="form-check-input flex-shrink-0",
                                      type="checkbox",
                                      onchange="this.form.submit();",
                                      style="font-size: 1.375em;"
                                      )
            }}
          {% endif %}
        </form>
          <div class="form-checked-content text-{{ task[1] }}" id="{{ loop.index0 }}">
            <strong class="{{ 'text-decoration-line-through' if task[2] else '' }}">{{ task[0] }}</strong>
              <div class="row position-relative">
                <div>
                  <button class="btn" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-title="Move up">
                    <svg xmlns="http://www.w3.org/2000/svg" width="0.5em" height="0.5em" class="bi bi-caret-up-fill" viewBox="0 0 16 16">
                      <path d="m7.247 4.86-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z"/>
                    </svg>
                  </button>
                  <button class="btn" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-title="Edit">
                    <svg xmlns="http://www.w3.org/2000/svg" width="0.5em" height="0.5em" class="bi bi-pencil-fill" viewBox="0 0 16 16">
                      <path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.5.5 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11z"/>
                    </svg>
                  </button>
                </div>
                <div>
                  <button class="btn" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-placement="bottom" data-bs-title="Move down">
                    <svg xmlns="http://www.w3.org/2000/svg" width="0.5em" height="0.5em" class="bi bi-caret-down-fill" viewBox="0 0 16 16">
                      <path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
                    </svg>
                  </button>
                  <button class="btn" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-placement="bottom" data-bs-title="Delete task">x</button>
                </div>
            </div>
          </div>
      </div>
      {% endfor %}

    <form method="POST" class="list-group-item d-flex gap-3 bg-body-secondary">
      {{ add_form.hidden_tag() }}
      <div class="dropdown align-middle" style="padding-top: 12px;">
          <button class="btn p-0" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            <img src="{{ url_for('static', filename='images/colorbox.jpg') }}" style="width: 1.375em; height: 1.375em;" alt="colorbox" loading="lazy">
          </button>
          <ul class="dropdown-menu" style="min-width: auto; padding: 0; margin: 0;">
            <li><input class="form-check-input shadow-none flex-shrink-0 text-bg-success" type="radio" name="taskColor" value="success" style="font-size: 1.375em; padding: 0; margin: 0;"></li>
            <li><input class="form-check-input shadow-none flex-shrink-0 text-bg-warning" type="radio" name="taskColor" value="warning" style="font-size: 1.375em; padding: 0; margin: 0;"></li>
            <li><input class="form-check-input shadow-none flex-shrink-0 text-bg-primary" type="radio" name="taskColor" value="primary" style="font-size: 1.375em; padding: 0; margin: 0;"></li>
            <li><input class="form-check-input shadow-none flex-shrink-0 text-bg-danger" type="radio" name="taskColor" value="danger" style="font-size: 1.375em; padding: 0; margin: 0;"></li>
            <li><input class="form-check-input shadow-none flex-shrink-0 text-bg-secondary" type="radio" name="taskColor" value="secondary" style="font-size: 1.375em; padding: 0; margin: 0;"></li>
            <li><input class="form-check-input shadow-none flex-shrink-0 text-bg-dark" type="radio" name="taskColor" value="dark" style="font-size: 1.375em; padding: 0; margin: 0;"></li>
          </ul>
      </div>
      <div class="d-flex w-100 align-items-center">
        <div class="form-floating me-3 w-100">
          {{ add_form.new_task(class="form-control", id="floatingInput", placeholder="add_a_task") }}
          {{ add_form.new_task.label(class="form-label", for="floatingInput") }}
        </div>
          {{ add_form.new_task_submit(class="btn btn-dark") }}
      </div>
    </form>
  </div>
</div>


<div class="modal modal-sheet position-static d-block p-4 py-md-5" tabindex="-1" role="dialog" id="EditModal">
  <div class="modal-dialog" role="document">
    <div class="modal-content rounded-4 shadow">
      <div class="modal-header p-5 pb-4 border-bottom-0">
        <h1 class="fw-bold mb-0 fs-2 text-center w-100">Do you want to make a new to-do list?</h1>
      </div>
      <div class="modal-body p-5 pt-3">
        <form method="POST">
          <div class="d-flex align-items-center mb-3 p-1">
            <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" fill="#dc3545" class="bi bi-exclamation-triangle me-3" viewBox="0 0 16 16">
              <path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.15.15 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.2.2 0 0 1-.054.06.1.1 0 0 1-.066.017H1.146a.1.1 0 0 1-.066-.017.2.2 0 0 1-.054-.06.18.18 0 0 1 .002-.183L7.884 2.073a.15.15 0 0 1 .054-.057m1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767z"/>
              <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"/>
            </svg>
            <button class="btn btn-danger flex-grow-1" type="button" data-bs-toggle="modal" data-bs-target="#EditOptions">Yes, delete my account</button>
          </div>

        </form>
      </div>
    </div>
  </div>
</div>


{% endblock %}